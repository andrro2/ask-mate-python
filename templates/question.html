{% extends 'layout.html' %}
{% block content %}
    <div id="question_title">{{ question[0]['title'] }}</div>
    <div id="message">{{ question[0]['message'] }}<br>
        <p id="time">{{ question[0]['submission_time'] }}</p>
    </div>
    <div id="q_comments">
        <a href="{{ url_for('add_question_comment', question_id = question_id) }}">Add comment</a><br>
        <table>
            <tr>
                <th>Comments:</th>
            </tr>
            {% for comment in question_comments %}
            <tr>
                <td>{{ comment['message'] }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <p id="answer_head">Answers:</p>
    <a id="add_answer"
       href="{{ url_for('add_answer', question_id = question_id) }}"
       id="add"><strong>Add new
        answer</strong></a>
    <table id="answer">
        {% if answers == [] %}
            <tr>
                <td>There is no answer for this question.</td>
            </tr>
        {% else %}
            <tr>
                <th>Submission time</th>
                <th>Message</th>
                <th>Image</th>
                <th>Comments</th>
            </tr>
            {% for items in answers %}
                <tr>
                    {% for a in items %}
                        {% if a != 'vote_number' and a != 'question_id' and a != 'id' %}
                            {% if a == 'submission_time' %}
                                <td id="time">{{ items[a] }}</td>
                            {% elif a == 'message' %}
                                <td><a href="{{ url_for('edit_answer', answer_id = items['id']) }}">{{ items[a] }}</a></td>
                            {% else %}
                                <td>{{ items[a] }}</td>
                                <td><ol>
                                {% for comment in answer_comments[items['id']] %}
                                    <li>{{ comment['message'] }}</li>
                                {% endfor %}
                                </ol></td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    <td><a id="remove"
                           href="{{ url_for('remove_answer', answer_id = items['id'], question_id = question_id) }}">&#10060;</a>
                    </td>
                    <td id="upvote">{{ items['vote_number'] }}</td>
                    <td><a href="{{ url_for('add_answer_comment', answer_id = items['id']) }}">Add comment</a> </td>
                </tr>
            {% endfor %}
        {% endif %}
    </table>
{% endblock %}
